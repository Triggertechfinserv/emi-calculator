<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>TechFinserv — SIP Calculator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Interactive SIP calculator — estimate invested amount, projected returns and final corpus using monthly compounding." />
  <link rel="icon" type="image/png" href="images/favicon.png">
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --accent:#003366;
      --accent-2:#154a7b;
      --muted:#6b7280;
      --bg:#f6f7fb;
      --card:#ffffff;
      --radius:14px;
      --page-padding:20px;
    }

    /* base */
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:var(--bg);color:#0f172a;-webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}
    .page{min-height:100%;display:flex;flex-direction:column}

    /* header */
    header.site-header{background:#fff;box-shadow:0 2px 6px rgba(15,23,42,0.06);padding:10px 16px;position:relative;z-index:99}
    .header-inner{display:flex;align-items:center;gap:12px;max-width:1600px;margin:0 auto;width:100%}
    .logo{max-height:56px}
    .nav-links{display:flex;gap:8px;margin-left:auto}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:8px 12px;border-radius:8px;font-weight:600;font-size:13px;cursor:pointer;border:0}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:transparent;border:1px solid rgba(3,66,102,0.08);color:var(--accent)}

    /* menu toggle & mobile menu */
    .menu-toggle{display:none;align-items:center;justify-content:center;padding:8px;border-radius:8px;border:0;background:transparent;cursor:pointer;margin-left:auto}
    .menu-toggle svg{display:block}
    .mobile-menu{display:none;position:absolute;right:16px;top:66px;background:var(--card);box-shadow:0 10px 30px rgba(15,23,42,0.08);border-radius:12px;padding:8px;min-width:200px;z-index:200;border:1px solid rgba(3,66,102,0.04)}
    .mobile-menu a{display:block;padding:10px 12px;border-radius:8px;color:var(--accent);font-weight:700;margin:4px 0}
    .mobile-menu a:hover{background:#f1f5f9}

    /* main */
    main.page-content{flex:1;width:100%;padding:18px var(--page-padding);box-sizing:border-box}
    .sip-wrapper{display:grid;grid-template-columns:1fr 320px;gap:20px;align-items:start;max-width:1400px;margin:0 auto;width:100%}

    /* card */
    .card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:0 8px 28px rgba(15,23,42,0.06);display:flex;flex-direction:column;gap:10px}
    .sip-sub{color:var(--muted);font-size:14px;margin-bottom:6px}

    /* form rows */
    .sip-row{display:flex;gap:12px;align-items:center;margin-bottom:10px}
    .sip-col{flex:1}
    .sip-label{font-size:14px;color:var(--accent-2);display:block;margin-bottom:6px}
    input[type=range]{width:100%;accent-color:var(--accent);height:32px}
    .sip-number{width:140px;padding:9px;border-radius:8px;border:1px solid #dbe3e1;font-weight:600}
    .value-bubble{background:#eef9f4;color:var(--accent);padding:8px 12px;border-radius:10px;font-weight:700;text-align:center;min-width:86px}

    /* chart - smaller and responsive */
    .sip-chart-wrap{display:flex;gap:14px;align-items:center;margin-top:10px;flex-wrap:wrap}
    .sip-chart{flex:0 0 200px;max-width:200px;height:200px}
    .sip-chart canvas{width:100% !important;height:100% !important;display:block}
    .sip-details{flex:1;min-width:180px}
    .sip-stat{margin-bottom:10px}
    .muted{color:var(--muted);font-size:13px}
    .big{font-size:18px;font-weight:700;color:var(--accent-2)}

    .sip-summary{display:flex;gap:12px;margin-top:12px;border-top:1px dashed #e5e7eb;padding-top:12px;flex-wrap:wrap}
    .scol{flex:1;min-width:120px}

    /* quick tools */
    .quick-card .inner{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 6px 20px rgba(15,23,42,0.04);display:flex;flex-direction:column;gap:10px}
    .quick-list{display:flex;flex-direction:column;gap:10px;margin-top:8px}
    .quick-list a{display:block;padding:10px;border-radius:8px;text-align:center;background:var(--accent);color:#fff;font-weight:700;font-size:14px}

    footer.site-footer{text-align:center;padding:18px 0;color:var(--muted);font-size:13px;margin-top:18px}

    /* MOBILE: make everything tighter and stack, reduce chart */
    @media (max-width:880px){
      main.page-content{padding:12px 14px}
      .sip-wrapper{grid-template-columns:1fr;gap:14px}
      .card{padding:14px}
      .sip-chart{flex:0 0 160px;max-width:160px;height:160px;margin:0 auto}
      .sip-chart-wrap{flex-direction:column;align-items:center;text-align:center}
      .sip-number{width:100%;max-width:260px}
      .value-bubble{display:block;margin:8px auto 0}
      .quick-list a{padding:12px}
      .nav-links{display:none}
      .menu-toggle{display:inline-flex}
      /* make mobile menu full width on very small screens */
      .mobile-menu{right:12px;left:12px;top:64px;min-width:auto}
    }

    /* tiny phones */
    @media (max-width:420px){
      .sip-chart{flex:0 0 140px;height:140px}
      .sip-number{font-size:14px}
      .value-bubble{padding:7px 10px}
    }

    /* accessibility focus */
    input:focus, a:focus, button:focus{outline:3px solid rgba(3,66,102,0.12);outline-offset:2px}
  </style>
</head>
<body>
  <div class="page">
    <!-- header -->
    <header class="site-header">
      <div class="header-inner">
        <a href="index.html" aria-label="TechFinserv home">
          <img class="logo" src="images/techfinserv-logo.png" alt="TechFinserv logo" loading="lazy">
        </a>

        <nav class="site-nav" aria-label="Main navigation">
          <div class="nav-links" role="menubar">
            <a class="btn btn-primary" href="index.html" role="menuitem">Home</a>
            <a class="btn btn-primary" href="blogs.html" role="menuitem">Blogs</a>
            <a class="btn btn-primary" href="services.html" role="menuitem">Services</a>
            <a class="btn btn-primary" href="emi-calculator.html" role="menuitem">EMI Calculator</a>
            <a class="btn btn-ghost" href="contact.html" role="menuitem">Contact</a>
          </div>

          <!-- visible on mobile -->
          <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-controls="mobileMenu" aria-label="Open menu">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" focusable="false" aria-hidden="true">
              <path d="M3 6h18M3 12h18M3 18h18" stroke="#003366" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>

          <div id="mobileMenu" class="mobile-menu" role="menu" aria-hidden="true">
            <a href="index.html" role="menuitem">Home</a>
            <a href="blogs.html" role="menuitem">Blogs</a>
            <a href="services.html" role="menuitem">Services</a>
            <a href="emi-calculator.html" role="menuitem">EMI Calculator</a>
            <a href="contact.html" role="menuitem">Contact</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="page-content" role="main">
      <!-- compact hidden H1 for SEO/accessibility -->
      <h1 style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">SIP Calculator — TechFinserv</h1>

      <div class="sip-wrapper" aria-live="polite">
        <!-- calculator -->
        <section class="card" aria-labelledby="sip-head">
          <h2 id="sip-head" style="display:none;">SIP Calculator</h2>

          <div class="sip-sub">Adjust monthly investment, expected return and time period to estimate the corpus.</div>

          <div class="sip-row">
            <div class="sip-col">
              <label class="sip-label" for="sipMonthlyRange">Monthly investment</label>
              <input id="sipMonthlyRange" type="range" min="100" max="200000" step="100" value="25000" />
            </div>
            <div style="width:120px;text-align:right">
              <div class="value-bubble" id="sipMonthlyValue">&#8377;25,000</div>
            </div>
          </div>

          <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:6px">
            <input id="sipMonthlyNumber" class="sip-number" type="number" value="25000" aria-label="Monthly investment" />
            <div class="muted">per month</div>
          </div>

          <div class="sip-row">
            <div class="sip-col">
              <label class="sip-label" for="sipRateRange">Expected return (p.a.)</label>
              <input id="sipRateRange" type="range" min="1" max="30" step="0.1" value="12" />
            </div>
            <div style="width:120px;text-align:right">
              <div class="value-bubble" id="sipRateValue">12%</div>
            </div>
          </div>

          <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:6px">
            <input id="sipRateNumber" class="sip-number" type="number" value="12" aria-label="Annual return percent" />
            <div class="muted">annual</div>
          </div>

          <div class="sip-row">
            <div class="sip-col">
              <label class="sip-label" for="sipYearsRange">Time period</label>
              <input id="sipYearsRange" type="range" min="1" max="40" step="1" value="10" />
            </div>
            <div style="width:120px;text-align:right">
              <div class="value-bubble" id="sipYearsValue">10 Yr</div>
            </div>
          </div>

          <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:8px">
            <input id="sipYearsNumber" class="sip-number" type="number" value="10" aria-label="Time period in years" />
            <div class="muted">years</div>
          </div>

          <div class="sip-chart-wrap">
            <div class="sip-chart" role="img" aria-label="Investment donut chart">
              <canvas id="sipDoughnut"></canvas>
            </div>

            <div class="sip-details" aria-live="polite">
              <div class="sip-stat">
                <div class="muted">Invested amount</div>
                <div class="big" id="sipInvested">&#8377;0</div>
              </div>
              <div class="sip-stat">
                <div class="muted">Estimated returns</div>
                <div class="big" id="sipReturns">&#8377;0</div>
              </div>
              <div class="sip-stat">
                <div class="muted">Estimated corpus</div>
                <div class="big" id="sipCorpus">&#8377;0</div>
              </div>
            </div>
          </div>

          <div class="sip-summary">
            <div class="scol">
              <div class="muted">Total months</div>
              <div class="big" id="sipMonths">0</div>
            </div>
          </div>
        </section>

        <!-- quick tools -->
        <aside class="quick-card">
          <div class="inner" role="complementary" aria-label="Quick tools">
            <h3 style="margin:0;color:var(--accent);font-size:18px">Quick Tools</h3>
            <p class="muted" style="margin:0">Jump to other calculators</p>
            <div class="quick-list" role="navigation" aria-label="Quick tools links">
              <a class="btn btn-primary" href="emi-calculator.html">EMI Calculator</a>
              <a class="btn btn-primary" href="pl-eligibility.html">Loan Eligibility</a>
              <a class="btn btn-primary" href="lumpsum.html">Lumpsum Calculator</a>
              <a class="btn btn-primary" href="swp.html">SWP Calculator</a>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <footer class="site-footer">Design and Maintained By Kiran Rathva</footer>
  </div>

  <script>
    // mobile menu toggle with accessibility improvements
    (function(){
      const menuToggle = document.getElementById('menuToggle');
      const mobileMenu = document.getElementById('mobileMenu');

      function setToggleVisibility(){
        // show toggle on small screens (CSS also handles this) and ensure mobile menu hidden by default
        if(window.innerWidth <= 880){
          menuToggle && (menuToggle.style.display = 'inline-flex');
        } else {
          menuToggle && (menuToggle.style.display = 'none');
          if(mobileMenu) { mobileMenu.style.display = 'none'; mobileMenu.setAttribute('aria-hidden','true'); }
          if(menuToggle) { menuToggle.setAttribute('aria-expanded','false'); }
        }
      }

      setToggleVisibility();
      window.addEventListener('resize', setToggleVisibility);

      // toggle click
      menuToggle?.addEventListener('click', e => {
        e.stopPropagation();
        const isOpen = menuToggle.getAttribute('aria-expanded') === 'true';
        if(!isOpen){
          mobileMenu.style.display = 'block';
          mobileMenu.setAttribute('aria-hidden','false');
          menuToggle.setAttribute('aria-expanded','true');
          // focus first link for keyboard users
          const first = mobileMenu.querySelector('a');
          first && first.focus();
        } else {
          mobileMenu.style.display = 'none';
          mobileMenu.setAttribute('aria-hidden','true');
          menuToggle.setAttribute('aria-expanded','false');
        }
      });

      // close when clicking outside
      document.addEventListener('click', function(e){
        if(!menuToggle || !mobileMenu) return;
        if(menuToggle.contains(e.target) || mobileMenu.contains(e.target)) return;
        if(mobileMenu.style.display === 'block'){
          mobileMenu.style.display = 'none';
          mobileMenu.setAttribute('aria-hidden','true');
          menuToggle.setAttribute('aria-expanded','false');
        }
      });

      // keyboard: close on Escape
      document.addEventListener('keydown', function(e){
        if(e.key === 'Escape' && mobileMenu && mobileMenu.style.display === 'block'){
          mobileMenu.style.display = 'none';
          mobileMenu.setAttribute('aria-hidden','true');
          menuToggle.setAttribute('aria-expanded','false');
          menuToggle.focus();
        }
      });

      // close menu when a mobile menu link is activated (helps single-page behaviour)
      mobileMenu?.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', () => {
          mobileMenu.style.display = 'none';
          mobileMenu.setAttribute('aria-hidden','true');
          menuToggle.setAttribute('aria-expanded','false');
        });
      });
    })();

    // wait for Chart.js
    function ready(fn){
      if(window.Chart) return fn();
      const i = setInterval(()=>{ if(window.Chart){ clearInterval(i); fn(); } }, 30);
      setTimeout(()=>clearInterval(i), 5000);
    }

    ready(function(){
      // chart (smaller, thinner)
      const ctx = document.getElementById('sipDoughnut').getContext('2d');
      const sipChart = new Chart(ctx, {
        type: 'doughnut',
        data: { labels:['Invested','Returns'], datasets:[{ data:[1,1], backgroundColor:['#003366','#2db07a'], borderWidth:0 }] },
        options: {
          cutout:'78%',
          responsive:true,
          maintainAspectRatio:false,
          plugins:{ legend:{display:false}, tooltip:{ callbacks:{ label: c => '₹' + Math.round(c.parsed).toLocaleString('en-IN'), afterLabel: c => { const ds = c.dataset.data; const total = ds.reduce((s,v)=>s+v,0)||0; const pct = total?Math.round(c.parsed/total*100):0; return pct+'%'; } } } }
        }
      });

      // helpers & calc
      function formatINR(n){ return '₹' + Math.round(n).toLocaleString('en-IN'); }
      function computeSIP(m,a,y){
        const months = y*12; const mr = a/1200; let total = 0;
        for(let i=0;i<months;i++){ total += m; total *= (1 + mr); }
        return { invested: m*months, returns: total - m*months, corpus: total, months };
      }

      // elements
      const el = id => document.getElementById(id);
      const sipMonthlyRange = el('sipMonthlyRange'), sipMonthlyNumber = el('sipMonthlyNumber'), sipMonthlyValue = el('sipMonthlyValue');
      const sipRateRange = el('sipRateRange'), sipRateNumber = el('sipRateNumber'), sipRateValue = el('sipRateValue');
      const sipYearsRange = el('sipYearsRange'), sipYearsNumber = el('sipYearsNumber'), sipYearsValue = el('sipYearsValue');
      const sipInvested = el('sipInvested'), sipReturns = el('sipReturns'), sipCorpus = el('sipCorpus'), sipMonths = el('sipMonths');

      function updateAll(){
        const m = Math.max(100, Math.round(Number(sipMonthlyRange.value)));
        const a = Math.max(0.1, Number(sipRateRange.value));
        const y = Math.max(1, Math.round(Number(sipYearsRange.value)));

        sipMonthlyNumber.value = m; sipRateNumber.value = a; sipYearsNumber.value = y;
        sipMonthlyValue.textContent = '₹' + m.toLocaleString('en-IN');
        sipRateValue.textContent = a.toFixed(1) + '%';
        sipYearsValue.textContent = y + ' Yr';

        const res = computeSIP(m,a,y);
        sipInvested.textContent = formatINR(res.invested);
        sipReturns.textContent = formatINR(res.returns);
        sipCorpus.textContent = formatINR(res.corpus);
        sipMonths.textContent = res.months;

        sipChart.data.datasets[0].data = [ Math.round(res.invested), Math.round(res.returns) ];
        sipChart.update();
      }

      // sync events + focus scroll for mobile to avoid keyboard hiding controls
      const inputs = [sipMonthlyRange, sipMonthlyNumber, sipRateRange, sipRateNumber, sipYearsRange, sipYearsNumber];
      inputs.forEach(inp => {
        inp.addEventListener('input', updateAll);
        inp.addEventListener('change', updateAll);

        inp.addEventListener('focus', ()=> {
          // on small screens, scroll the focused control into center so keyboard doesn't hide lower parts
          if(window.innerWidth <= 880){
            setTimeout(()=> inp.scrollIntoView({behavior:'smooth', block:'center'}), 250);
          }
        }, {passive:true});
      });

      // number inputs to range sync
      sipMonthlyNumber.addEventListener('change', ()=>{ let v = Math.round(Number(sipMonthlyNumber.value)||0); if(v<100) v=100; sipMonthlyRange.value = v; updateAll(); });
      sipRateNumber.addEventListener('change', ()=>{ let v = Number(sipRateNumber.value)||1; if(v<0.1) v=0.1; sipRateRange.value = v; updateAll(); });
      sipYearsNumber.addEventListener('change', ()=>{ let v = Math.round(Number(sipYearsNumber.value)||1); if(v<1) v=1; sipYearsRange.value = v; updateAll(); });

      // initial
      updateAll();
    });
  </script>
</body>
</html>
